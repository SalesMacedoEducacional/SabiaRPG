âœ… PROMPT PARA O REPLIT â€“ INTEGRAÃ‡ÃƒO DO MENU DO GESTOR COM O BANCO DE DADOS

OBJETIVO: Implementar a funcionalidade do menu lateral do painel do gestor no SABIÃ RPG. Cada item do menu deve consultar diretamente os dados reais do Supabase, com base no gestor autenticado (req.user.id).

âš™ï¸ PADRÃƒO GERAL:
- Todas as consultas devem considerar o gestor logado (gestor_id = req.user.id).
- Os dados exibidos devem estar relacionados Ã s escolas em que esse gestor Ã© responsÃ¡vel.
- Para cada rota, gerar uma funÃ§Ã£o API REST no backend com Supabase.
- Layout deve usar componentes do projeto jÃ¡ existentes (Tailwind + Shadcn/ui).

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
ğŸ“Œ 1. ESCOLAS â€“ MENU LATERAL: "Escolas"
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
- Buscar todas as escolas da tabela `escolas` em que `gestor_id = req.user.id`.
- Exibir: nome, cidade, estado, status.
- Calcular tambÃ©m o total de turmas da escola (usando COUNT).
- Adicionar botÃ£o "Ver Detalhes" e "Editar".

ğŸ› ï¸ Backend (Exemplo de SQL):
SELECT e.*, (
  SELECT COUNT(*) FROM turmas t WHERE t.escola_id = e.id
) AS total_turmas
FROM escolas e
WHERE e.gestor_id = {{req.user.id}};

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
ğŸ“Œ 2. PROFESSORES â€“ MENU LATERAL: "Professores"
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
- Buscar na tabela `perfis_professor` todos os professores vinculados Ã s escolas do gestor logado.
- Exibir: nome, cpf, telefone, email, escola.
- Permitir exibiÃ§Ã£o agrupada por escola.

ğŸ› ï¸ Backend:
SELECT pp.*, u.email, e.nome AS escola_nome
FROM perfis_professor pp
JOIN usuarios u ON u.id = pp.usuario_id
JOIN escolas e ON e.id = pp.escola_id
WHERE e.gestor_id = {{req.user.id}};

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
ğŸ“Œ 3. USUÃRIOS â€“ MENU LATERAL: "UsuÃ¡rios"
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
- Buscar na tabela `usuarios` todos os usuÃ¡rios com `escola_id` vinculada a uma escola onde `gestor_id = req.user.id`.
- Exibir: nome, email, papel, status, data de criaÃ§Ã£o.

ğŸ› ï¸ Backend:
SELECT u.*
FROM usuarios u
JOIN escolas e ON u.escola_id = e.id
WHERE e.gestor_id = {{req.user.id}};

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
ğŸ“Œ 4. ALUNOS â€“ NOVO ITEM DE MENU: "Alunos"
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
- Criar novo item no menu lateral com nome "Alunos" (Ã­cone: ğŸ“).
- Buscar na tabela `perfis_aluno` os alunos que:
  â†’ TÃªm `turma_id` em turmas da escola do gestor logado.
- Exibir: nome_aluno, matrÃ­cula, turma, escola.
- Permitir filtro por escola ou turma (dropdown).

ğŸ› ï¸ Backend:
SELECT pa.*, m.numero_matricula, t.nome AS turma_nome, e.nome AS escola_nome
FROM perfis_aluno pa
JOIN matriculas m ON pa.matricula_id = m.id
JOIN turmas t ON pa.turma_id = t.id
JOIN escolas e ON t.escola_id = e.id
WHERE e.gestor_id = {{req.user.id}};

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
ğŸ’¡ EXTRAS:
- Toda listagem deve permitir paginaÃ§Ã£o e busca.
- Incluir botÃ£o "Cadastrar novo" no topo de cada listagem (ex: novo aluno, novo professor).
- Garantir que apenas dados do gestor logado sejam exibidos.
- A autenticaÃ§Ã£o jÃ¡ estÃ¡ vinculada via Supabase Auth. Use auth.uid() para polÃ­ticas RLS se necessÃ¡rio.
- Os nomes dos botÃµes, rotas e componentes devem seguir o padrÃ£o visual do painel.

